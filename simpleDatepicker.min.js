(function(a){a.fn.simpleDatepicker=function(u){function v(){a(this).parent().wrap('<div class="datepicker-wrapper">').addClass("datepicker-container");var e=a(this).parents(".datepicker-wrapper");e.css("display","inline-block");a('<span class="datepicker-label">'+n.labelText+"</span>").prependTo(e).css("cursor","pointer")}function w(){var e=new p(n.startYear,n.startMonth),g=a(this).parent();g.css("position","relative");a('<div class="datepicker"></div>').appendTo(g);var l=g.find(".datepicker");a('<div class="calendar-header"></div>').prependTo(l);
a('<span class="visible-year"><span class="year-down date-control date-control-down"> < </span><span class="year-value">'+e.calendarYear+'</span><span class="year-up date-control date-control-up"> > </span></span>').prependTo(l.find(".calendar-header"));a('<span class="visible-month"><span class="month-down date-control date-control-down"> < </span><span class="month-value">'+e.calendarMonth+'</span><span class="month-up date-control date-control-up"> > </span></span>').appendTo(l.find(".calendar-header"));
a('<div class="calendar-table">'+e.calendarBody+"</div>").appendTo(l);n.dateRange?g.css("float","left"):(g.css("position","absolute"),a(this).parent().hide());g.find(".date-control").css("cursor","pointer");a(this).hide();a('label[for="'+a(this).attr("id")+'"]').hide()}function x(){var e=a(this).parent(),g=a(this).parents(".datepicker-wrapper");e.clone().appendTo(g);var l=e.next(),g=g.find(".datepicker-container"),m=e.attr("id"),k=e.children("input"),b=l.children("input"),d=e.children("input").attr("id");
g.wrapAll('<div class="date-range-picker">');a(".date-range-picker").hide().css("position","absolute");m.length&&(e.attr("id",m+"1"),l.attr("id",m+"2"));d.length&&b.attr("id",d+"-to");l.find(".date-control-down").addClass("date-control-disabled");k.addClass("date-from");b.addClass("date-to");b.each(s);b.each(t);l.find("td:not(.not-current-month)").addClass("disabled-day")}function s(){function e(b){var d=a(this).parent().find(".year-value"),c=a(this).parents(".calendar-header").find(".month-value"),
h=a(this).parents(".calendar-header").next();b=l({year:d.text(),month:m(c.text()),shiftYear:!0,direction:b.data.direction});d.text(b.calendarYear);h.html(b.calendarBody);if(n.dateRange){var h=a(this).parents(".date-range-picker").find(".date-from").parent(),d=a(this).parents(".date-range-picker").find(".date-to").parent(),f=h.find(".year-value"),h=d.find(".year-value");b=d.find(".month-value");var c=d.find(".calendar-table"),e=d.find(".date-control-down");f.text()>=h.text()?(e.addClass("date-control-disabled"),
f=l({year:f.text()-1,month:m(b.text()),shiftYear:!0,direction:!0}),h.text(f.calendarYear),b.text(f.calendarMonth),c.html(f.calendarBody),d.find("td").addClass("disabled-day"),a(this).parents(".datepicker-wrapper").find(".datepicker-label").text(n.labelText)):(e.removeClass("date-control-disabled"),d.find("td").removeClass("disabled-day"))}}function g(b){var d=a(this).parent().find(".month-value"),c=a(this).parents(".calendar-header").find(".year-value"),h=a(this).parents(".calendar-header").next();
b=l({year:c.text(),month:m(d.text()),shiftMonth:!0,direction:b.data.direction});d.text(b.calendarMonth);c.text(b.calendarYear);h.html(b.calendarBody);if(n.dateRange&&a(this).parents(".datepicker").prev().hasClass("date-from")){var f=a(this).parents(".datepicker-container").next(),h=f.find(".month-value");b=f.find(".year-value");var f=f.find(".calendar-table"),d=m(d.text()),e=m(h.text()),g=0;0===d&&(g=1);if(d>e&&c.text()===b.text()||g&&c.text()>b.text())c=l({year:b.text(),month:e,shiftMonth:!0,direction:!0}),
h.text(c.calendarMonth),b.text(c.calendarYear),f.html(c.calendarBody)}d=a(this).parents(".date-range-picker").find(".date-from").parent();c=m(d.find(".month-value").text());h=a(this).parents(".date-range-picker").find(".date-to").parent();b=m(h.find(".month-value").text());d=d.find(".year-value").text();f=h.find(".year-value").text();e=h.find(".month-down");c>=b&&d===f?(e.addClass("date-control-disabled"),h.find("td").addClass("disabled-day")):(e.removeClass("date-control-disabled"),h.find("td").removeClass("disabled-day"))}
function l(b){b.month++;var a;if(b.shiftYear)b.direction?b.year++:b.year--;else{b.direction?b.month++:b.month--;a=b.year;var c=b.month;0===c?(c+=12,a--):13===c&&(c-=12,a++);a=[a,c];b.year=a[0];b.month=a[1]}return new p(b.year,b.month)}function m(b){for(var a=0;a<r[n.lang].length&&b!==r[n.lang][a];a++);return a}var k=a(this).parent();k.on("click",".year-down:not(.date-control-disabled)",{direction:!1},e);k.on("click",".year-up",{direction:!0},e);k.on("click",".month-down:not(.date-control-disabled)",
{direction:!1},g);k.on("click",".month-up",{direction:!0},g)}function t(){var e=a(this).parent().find(".calendar-table"),g=a(this).parent().find(".month-value"),l=a(this).parent().find(".year-value");e.on("click","td:not(.not-current-month, .disabled-day)",function(){function e(a,b){var c=b.nextAll(".calendar-label-separator");a.text()&&!c.text()&&b.after('<span class="calendar-label-separator"> - </span>')}for(var k=l.text(),b=g.text(),d=a(this).text(),c=a(this).parents(".datepicker").prevAll("input"),
h,f=a(this).parents(".datepicker-wrapper").children(".datepicker-label"),p=r[n.lang],q=0;q<p.length;q++)if(b===p[q]){h=q+1;break}h=10>h?"0"+h.toString():h.toString();d=10>d?"0"+d.toString():d.toString();c.val(k+"-"+h+"-"+d);k=d+" "+b+" "+k;if(n.dateRange){if(f.text()===n.labelText&&(f.html('<span class="label-from"></span>'),a('<span class="label-to"></span>').appendTo(f)),b=f.children(".label-from"),f=f.children(".label-to"),c.hasClass("date-from")?(b.text(k),e(f,b)):c.hasClass("date-to")&&(f.text(k),
e(b,b)),c.hasClass("date-from"))for(c=c.parents(".date-range-picker").find(".date-to").parent().find("td:not(.not-current-month)"),f=0;f<c.length;f++)parseInt(c.eq(f).text())<parseInt(a(this).text())?c.eq(f).addClass("disabled-day"):c.eq(f).removeClass("disabled-day")}else f.text(k)})}function y(){var e=a(this).parents(".datepicker-wrapper").children(".datepicker-label"),g=e.next();e.click(function(){g.fadeToggle("fast");g.toggleClass("expanded")});a(document).click(function(e){a(e.target).closest(".datepicker-wrapper").length||
(g.hasClass("expanded")&&(g.removeClass("expanded"),g.fadeOut("fast")),e.stopPropagation())})}function p(a,g){function l(a){a=a.getDay();0===a&&(a=7);return a-1}for(var m=g-1,k=new Date(a,m),b="<table><tr><th>\u043f\u043d</th><th>\u0432\u0442</th><th>\u0441\u0440</th><th>\u0447\u0442</th><th>\u043f\u0442</th><th>\u0441\u0431</th><th>\u0432\u0441</th></tr><tr>",d=0,c=l(k)-1;d<l(k);d++,c--)b+='<td class="not-current-month">'+(new Date(a,m,-c)).getDate()+"</td>";for(c=1;k.getMonth()===m;)b+="<td>"+k.getDate()+
"</td>",6===l(k)%7&&(b+="<tr></tr>"),k.setDate(k.getDate()+1),c++;if(l(k))for(d=l(k);7>d;d++,c++)b+='<td class="not-current-month">'+(new Date(a,m,c)).getDate()+"</td>";m=r[n.lang][m];this.calendarYear=a;this.calendarMonth=m;this.calendarBody=b}var n=a.extend({},{startYear:(new Date).getFullYear(),startMonth:(new Date).getMonth()+1,labelText:"Choose a date",lang:"en",dateRange:!1},u),r={ru:"\u042f\u043d\u0432\u0430\u0440\u044c \u0424\u0435\u0432\u0440\u0430\u043b\u044c \u041c\u0430\u0440\u0442 \u0410\u043f\u0440\u0435\u043b\u044c \u041c\u0430\u0439 \u0418\u044e\u043d\u044c \u0418\u044e\u043b\u044c \u0410\u0432\u0433\u0443\u0441\u0442 \u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c \u041e\u043a\u0442\u044f\u0431\u0440\u044c \u041d\u043e\u044f\u0431\u0440\u044c \u0414\u0435\u043a\u0430\u0431\u0440\u044c".split(" "),
en:"Jan Feb March Apr May June July Aug September \u041ect Nov Dec".split(" ")};return this.each(function(){a(this).is('input[type="date"]')?(a(this).each(v),a(this).each(w),n.dateRange&&a(this).each(x),a(this).each(y),a(this).each(s),a(this).each(t)):console.error("Illegal choice")})}})(jQuery);