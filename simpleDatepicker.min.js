(function(c){c.fn.simpleDatepicker=function(y){function z(){c(this).parent().wrap('<div class="datepicker-wrapper">').addClass("datepicker-container");var a=c(this).parents(".datepicker-wrapper");a.css("display","inline-block");c('<span class="datepicker-label">'+g.labelText+"</span>").prependTo(a).css("cursor","pointer")}function A(){var a=new s(g.startYear,g.startMonth),d=c(this).parent();d.css("position","relative");c('<div class="datepicker"></div>').appendTo(d);var b=d.find(".datepicker");c('<div class="calendar-header"></div>').prependTo(b);
c('<span class="visible-year"><span class="year-down date-control date-control-down"> < </span><span class="year-value">'+a.calendarYear+'</span><span class="year-up date-control date-control-up"> > </span></span>').prependTo(b.find(".calendar-header"));c('<span class="visible-month"><span class="month-down date-control date-control-down"> < </span><span class="month-value">'+a.calendarMonth+'</span><span class="month-up date-control date-control-up"> > </span></span>').appendTo(b.find(".calendar-header"));
c('<div class="calendar-table">'+a.calendarBody+"</div>").appendTo(b);g.dateRange?d.css("float","left"):(d.css("position","absolute"),c(this).parent().hide());d.find(".date-control").css("cursor","pointer");c(this).hide();c('label[for="'+c(this).attr("id")+'"]').hide()}function B(){var a=c(this).parent(),d=c(this).parents(".datepicker-wrapper");a.clone().appendTo(d);var b=a.next(),d=d.find(".datepicker-container"),k=a.attr("id"),f=a.children("input"),h=b.children("input"),e=a.children("input").attr("id");
d.wrapAll('<div class="date-range-picker">');c(".date-range-picker").hide().css("position","absolute");k.length&&(a.attr("id",k+"1"),b.attr("id",k+"2"));e.length&&h.attr("id",e+"-to");b.find(".date-control-down").addClass("date-control-disabled");f.addClass("date-from");h.addClass("date-to");b.find("td:not(.not-current-month)").addClass("disabled-day");h.each(t);h.each(u);h.each(v)}function C(){c('<ul class="fixed-range"></ul>').appendTo(g.fixedRangeInner);var a=g.fixedRangeInner.children(".fixed-range");
c('<li class="today fixed-range-item"><a href="javascript:void(0)">\u0417\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f</a></li>').prependTo(a);c('<li class="this-week fixed-range-item"><a href="javascript:void(0)">\u0417\u0430 \u043d\u0435\u0434\u0435\u043b\u044e</a></li>').appendTo(a);c('<li class="this-month fixed-range-item"><a href="javascript:void(0)">\u0417\u0430 \u043c\u0435\u0441\u044f\u0446</a></li>').appendTo(a)}function D(){var a=g.fixedRangeInner.children(".fixed-range").children(".fixed-range-item").children("a"),
d,b;b=c(this);d=c(this).parents(".datepicker-wrapper").find(".date-to");a.click(function(){var k=new Date,f=c(this).parent(),a=r(k.getFullYear(),k.getMonth(),k.getDate());n(d,a);f.hasClass("today")?n(b,d.val()):f.hasClass("this-week")?(f=r(k.getFullYear(),k.getMonth(),k.getDate()-7),n(b,f)):f.hasClass("this-month")&&(f=r(k.getFullYear(),k.getMonth()-1,k.getDate()),n(b,f));var e=c(d).next(),f=e.find(".month-value"),a=e.find(".year-value"),e=e.find(".calendar-table");q({year:k.getFullYear(),month:k.getMonth()+
1,direction:!1,yearInner:a,monthInner:f,tableInner:e})});b.change(function(){var k=new Date(b.val()),a=c(b).next(),d=a.find(".month-value"),e=a.find(".year-value"),a=a.find(".calendar-table");q({year:k.getFullYear(),month:k.getMonth()+1,direction:!1,yearInner:e,monthInner:d,tableInner:a})})}function t(){function a(a){var b=c(this).parent().find(".year-value"),d=c(this).parents(".calendar-header").find(".month-value"),e=c(this).parents(".calendar-header").next();q({year:b.text(),month:m[g.lang].indexOf(d.text()),
shiftYear:!0,direction:a.data.direction,yearInner:b,tableInner:e});if(g.dateRange){b=c(this).parents(".date-range-picker").find(".date-from").parent();a=c(this).parents(".date-range-picker").find(".date-to").parent();var b=b.find(".year-value"),d=a.find(".year-value"),e=a.find(".month-value"),l=a.find(".calendar-table"),p=a.find(".date-control-down");b.text()>=d.text()?(p.addClass("date-control-disabled"),q({year:b.text()-1,month:m[g.lang].indexOf(e.text()),shiftYear:!0,direction:!0,yearInner:d,monthInner:e,
tableInner:l}),a.find("td").addClass("disabled-day"),c(this).parents(".datepicker-wrapper").find(".datepicker-label").text(g.labelText)):(p.removeClass("date-control-disabled"),a.find("td").removeClass("disabled-day"))}}function d(a){var b=c(this).parent().find(".month-value"),d=c(this).parents(".calendar-header").find(".year-value"),e=c(this).parents(".calendar-header").next();q({year:d.text(),month:m[g.lang].indexOf(b.text()),direction:a.data.direction,yearInner:d,monthInner:b,tableInner:e});if(g.dateRange&&
c(this).parents(".datepicker").prev().hasClass("date-from")){var l=c(this).parents(".datepicker-container").next();a=l.find(".month-value");var e=l.find(".year-value"),l=l.find(".calendar-table"),b=m[g.lang].indexOf(b.text()),p=m[g.lang].indexOf(a.text()),n=0;0===b&&(n=1);(b>p&&d.text()===e.text()||n&&d.text()>e.text())&&q({year:e.text(),month:p,direction:!0,yearInner:e,monthInner:a,tableInner:l})}b=c(this).parents(".date-range-picker").find(".date-from").parent();d=m[g.lang].indexOf(b.find(".month-value").text());
a=c(this).parents(".date-range-picker").find(".date-to").parent();e=m[g.lang].indexOf(a.find(".month-value").text());b=b.find(".year-value").text();l=a.find(".year-value").text();p=a.find(".month-down");d>=e&&b===l?(p.addClass("date-control-disabled"),a.find("td").addClass("disabled-day")):(p.removeClass("date-control-disabled"),a.find("td").removeClass("disabled-day"))}var b=c(this).parent();b.on("click",".year-down:not(.date-control-disabled)",{direction:!1},a);b.on("click",".year-up",{direction:!0},
a);b.on("click",".month-down:not(.date-control-disabled)",{direction:!1},d);b.on("click",".month-up",{direction:!0},d)}function u(){var a=c(this).parent().find(".calendar-table"),d=c(this).parent().find(".month-value"),b=c(this).parent().find(".year-value");a.on("click","td:not(.not-current-month, .disabled-day)",function(){var a=b.text(),f=d.text(),h=c(this).text(),e=c(this).parents(".datepicker").prevAll("input"),f=m[g.lang].indexOf(f);n(e,r(a,f,h));if(g.dateRange&&e.hasClass("date-from"))for(a=
e.parents(".date-range-picker").find(".date-to").parent().find("td:not(.not-current-month)"),h=0;h<a.length;h++)parseInt(a.eq(h).text())<parseInt(c(this).text())?a.eq(h).addClass("disabled-day"):a.eq(h).removeClass("disabled-day")})}function r(a,d,b){d=w(d+1);b=w(b);return a+"-"+d+"-"+b}function w(a){return 10>a?"0"+a.toString():a.toString()}function n(a,d){a.val(d).trigger("change")}function v(){c(this).change(function(){function a(a,b){var d=b.nextAll(".calendar-label-separator");a.text()&&!d.text()&&
b.after('<span class="calendar-label-separator"> - </span>')}var d=c(this).parents(".datepicker-wrapper").children(".datepicker-label"),b=new Date(c(this).val()),b=b.getDate()+" "+m[g.lang][b.getMonth()]+" "+b.getFullYear();if(g.dateRange){d.text()===g.labelText&&(d.html('<span class="label-from"></span>'),c('<span class="label-to"></span>').appendTo(d));var k=d.children(".label-from"),d=d.children(".label-to");switch(c(this).attr("class")){case "date-from":k.text(b);a(d,k);break;case "date-to":d.text(b),
a(k,k)}}else d.text(b)})}function q(a){var d=a.year,b=a.month,c=a.shiftYear,f=a.direction;b++;if(c)f?d++:d--;else{f?b++:b--;switch(b){case 0:b+=12;d--;break;case 13:b-=12,d++}b=[d,b];d=b[0];b=b[1]}d=new s(d,b);b=a.yearInner;c=a.monthInner;a=a.tableInner;c&&c.text(d.calendarMonth);b.text(d.calendarYear);a.html(d.calendarBody)}function E(){var a=c(this).parents(".datepicker-wrapper").children(".datepicker-label"),d=a.next();a.click(function(){d.fadeToggle("fast");d.toggleClass("expanded")});c(document).click(function(a){c(a.target).closest(".datepicker-wrapper").length||
(d.hasClass("expanded")&&(d.removeClass("expanded"),d.fadeOut("fast")),a.stopPropagation())})}function s(a,d){function b(a){a=a.getDay();0===a&&(a=7);return a-1}for(var c=d-1,f=new Date(a,c),h="<table><tr>",e=0;e<x[g.lang].length;e++)h+="<td>"+x[g.lang][e]+"</td>";for(var h=h+"</tr>",e=0,l=b(f)-1;e<b(f);e++,l--)h+='<td class="not-current-month">'+(new Date(a,c,-l)).getDate()+"</td>";for(l=1;f.getMonth()===c;)h+="<td>"+f.getDate()+"</td>",6===b(f)%7&&(h+="<tr></tr>"),f.setDate(f.getDate()+1),l++;if(b(f))for(e=
b(f);7>e;e++,l++)h+='<td class="not-current-month">'+(new Date(a,c,l)).getDate()+"</td>";c=m[g.lang][c];this.calendarYear=a;this.calendarMonth=c;this.calendarBody=h}var g=c.extend({},{startYear:(new Date).getFullYear(),startMonth:(new Date).getMonth()+1,labelText:"Choose a date",lang:"en",dateRange:!1,fixedRange:!1,fixedRangeInner:c(this).parent()},y),m={ru:"\u042f\u043d\u0432\u0430\u0440\u044c \u0424\u0435\u0432\u0440\u0430\u043b\u044c \u041c\u0430\u0440\u0442 \u0410\u043f\u0440\u0435\u043b\u044c \u041c\u0430\u0439 \u0418\u044e\u043d\u044c \u0418\u044e\u043b\u044c \u0410\u0432\u0433\u0443\u0441\u0442 \u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c \u041e\u043a\u0442\u044f\u0431\u0440\u044c \u041d\u043e\u044f\u0431\u0440\u044c \u0414\u0435\u043a\u0430\u0431\u0440\u044c".split(" "),
en:"Jan Feb March Apr May June July Aug Sept Oct Nov Dec".split(" ")},x={ru:"\u043f\u043d \u0432\u0442 \u0441\u0440 \u0447\u0442 \u043f\u0442 \u0441\u0431 \u0432\u0441".split(" "),en:"Mon Tue Wed Thu Fri Sat Sun".split(" ")};return this.each(function(){c(this).is('input[type="date"]')?(c(this).each(z),c(this).each(A),g.dateRange&&(c(this).each(B),g.fixedRange&&(c(this).each(C),c(this).each(D))),c(this).each(E),c(this).each(t),c(this).each(u),c(this).each(v)):console.error("Illegal choice")})}})(jQuery);